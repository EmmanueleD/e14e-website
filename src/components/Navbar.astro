---
const navItems = [
  { name: "Chi sono", href: "#about" },
  { name: "Skills", href: "#skills" },
  // { name: "Progetti", href: "#projects" },
  { name: "Contatti", href: "#contact" },
];

import LogoAnimation from "./LogoAnimation.jsx";
import LanguagePicker from "./LanguagePicker.astro";
---

<nav class="fixed top-0 w-full z-50 transition-all duration-300" id="navbar">
  <div class="max-w-7xl mx-auto px-6 py-4">
    <div class="glass-panel px-6 py-3 flex justify-between items-center">
      <LogoAnimation client:load />

      <!-- Desktop Menu -->
      <div class="hidden md:flex gap-8 items-center">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class="text-sm font-medium text-text-muted hover:text-accent-orange transition-colors tracking-wide uppercase"
            >
              {item.name}
            </a>
          ))
        }
        <div class="border-l border-white/10 pl-6 ml-2">
          <LanguagePicker />
        </div>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden text-white z-50 relative"
        aria-label="Menu"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu Overlay -->
  <div
    id="mobile-menu"
    class="fixed inset-0 bg-space-dark/95 backdrop-blur-xl z-40 transform translate-x-full transition-transform duration-300 flex items-center justify-center md:hidden"
  >
    <div class="flex flex-col gap-8 text-center">
      {
        navItems.map((item) => (
          <a
            href={item.href}
            class="text-2xl font-display font-bold text-white hover:text-accent-orange transition-colors"
            onclick="document.getElementById('mobile-menu').classList.add('translate-x-full')"
          >
            {item.name}
          </a>
        ))
      }
      <div class="pt-4 mt-4 border-t border-white/10 flex justify-center">
        <LanguagePicker />
      </div>
    </div>
  </div>
</nav>

<script>
  // Navbar scroll effect
  const navbar = document.getElementById("navbar");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      navbar?.classList.add("py-2");
    } else {
      navbar?.classList.remove("py-2");
    }
  });

  // Mobile menu toggle
  const btn = document.getElementById("mobile-menu-btn");
  const menu = document.getElementById("mobile-menu");

  btn?.addEventListener("click", () => {
    menu?.classList.toggle("translate-x-full");
  });
</script>
